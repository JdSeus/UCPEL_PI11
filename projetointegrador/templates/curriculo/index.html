{% extends 'base.html' %}

{%block conteudo%}

<div class="min-h-[calc(100vh-90px-20vh)] flex items-center">
    <div class="block p-[16px] bg-slate-300  m-auto">

        <div class="font-bold mb-[20px] text-center">
            CURRÍCULO
        </div>

        <div class="mb-[10px]">
            <div class="font-bold">
                Endereço:   
            </div>
            <div class="flex justify-center mb-[5px]">
                <div>
                    {{ usuario.curriculo.endereco.rua }}   
                </div>
                <div class="ml-[5px]">
                    {{ usuario.curriculo.endereco.bairro }}   
                </div>
                <div class="ml-[5px]">
                    {{ usuario.curriculo.endereco.cidade }}   
                </div>
                <div class="ml-[5px]">
                    {{ usuario.curriculo.endereco.estado }}   
                </div>
            </div>
            <div class="text-white cursor-pointer w-fit p-[5px] bg-yellow-600" hx-get="{% url 'ajax-editar-endereco' %}" hx-target="#js-dialog">
                <div class="flex">
                    <div>
                        Editar Endereco
                    </div>
                    <div class="bg-yellow-600 rounded text-white leading-none p-[5px] ml-[5px]">
                        {% include "pencil.html" %}
                    </div>
                </div>
            </div>
        </div>

        <div>
            <div class="font-bold">
                Telefones:   
            </div>
        </div>
        {% if usuario.curriculo.telefones.all.count > 0 %}
        <div class="mb-[10px]">
            {% for telefone in usuario.curriculo.telefones.all %}        
                <div class="flex justify-between mb-[5px]">
                    <div>
                        {{ telefone.telefone }}  
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="cursor-pointer bg-yellow-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-editar-telefone' telefone.id %}" hx-target="#js-dialog">
                            {% include "pencil.html" %}
                        </div>
                        <div class="cursor-pointer bg-red-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-remover-telefone' telefone.id %}" hx-target="#js-dialog">
                            &#10005;
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="mb-[10px]">
            <div class="text-white cursor-pointer w-fit p-[5px] bg-green-600" hx-get="{% url 'ajax-adicionar-telefone' %}" hx-target="#js-dialog">
                <div class="flex">
                    <div>
                        Adicionar Telefone
                    </div>
                    <div class="bg-green-600 rounded text-white leading-none p-[5px] ml-[5px]">
                        {% include "plus.html" %}
                    </div>
                </div>
            </div>
        </div>

        <div>
            <div class="font-bold">
                Links:   
            </div>
        </div>
        {% if usuario.curriculo.links.all.count > 0 %}
        <div class="mb-[10px]">
            {% for link in usuario.curriculo.links.all %}        
                <div class="flex justify-between mb-[5px]">
                    <div>
                        <a class="text-blue-500" href="{{ link.link }}" target="_blank">{{ link.titulo }}</a> 
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="cursor-pointer bg-yellow-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-editar-link' link.id %}" hx-target="#js-dialog">
                            {% include "pencil.html" %}
                        </div>
                        <div class="cursor-pointer bg-red-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-remover-link' link.id %}" hx-target="#js-dialog">
                            &#10005;
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="mb-[10px]">
            <div class="text-white cursor-pointer w-fit p-[5px] bg-green-600" hx-get="{% url 'ajax-adicionar-link' %}" hx-target="#js-dialog">
                <div class="flex">
                    <div>
                        Adicionar Link
                    </div>
                    <div class="bg-green-600 rounded text-white leading-none p-[5px] ml-[5px]">
                        {% include "plus.html" %}
                    </div>
                </div>
            </div>
        </div>

        <div>
            <div class="font-bold">
                Escolaridade:   
            </div>
        </div>
        {% if usuario.curriculo.escolaridades.all.count > 0 %}
        <div class="mb-[10px]">
            {% for escolaridade in usuario.curriculo.escolaridades.all %}        
                <div class="flex justify-between mb-[5px]">
                    <div>
                        {{ escolaridade.curso }}  
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="cursor-pointer bg-yellow-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-editar-escolaridade' escolaridade.id %}" hx-target="#js-dialog">
                            {% include "pencil.html" %}
                        </div>
                        <div class="cursor-pointer bg-red-600 rounded text-white leading-none p-[5px] ml-[5px]" hx-get="{% url 'ajax-remover-escolaridade' escolaridade.id %}" hx-target="#js-dialog">
                            &#10005;
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="mb-[10px]">
            <div class="text-white cursor-pointer w-fit p-[5px] bg-green-600" hx-get="{% url 'ajax-adicionar-escolaridade' %}" hx-target="#js-dialog">
                <div class="flex">
                    <div>
                        Adicionar Escolaridade
                    </div>
                    <div class="bg-green-600 rounded text-white leading-none p-[5px] ml-[5px]">
                        {% include "plus.html" %}
                    </div>
                </div>
            </div>
        </div>


        <div>
            <div class="font-bold">
                Cursos:   
            </div>
        </div>
        {% if usuario.curriculo.cursos.all.count > 0 %}
        <div class="mb-[10px]">
            {% for curso in usuario.curriculo.cursos.all %}        
                <div class="flex justify-between mb-[5px]">
                    <div>
                        {{ curso.titulo }}  
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="mb-[10px]">
            <div class="text-white cursor-pointer w-fit p-[5px] bg-green-600" hx-get="{% url 'ajax-adicionar-curso' %}" hx-target="#js-dialog">
                <div class="flex">
                    <div>
                        Adicionar Curso
                    </div>
                    <div class="bg-green-600 rounded text-white leading-none p-[5px] ml-[5px]">
                        {% include "plus.html" %}
                    </div>
                </div>
            </div>
        </div>

    </div> 
</div>

{%endblock%}

{%block scripts%}
<script>
    function reloadPage() {
        window.location.href = window.location.pathname + window.location.search + window.location.hash;
    }

    htmx.on("enderecoListChanged", (e) => {
        reloadPage();
    });

    htmx.on("telefoneListChanged", (e) => {
        reloadPage();
    });

    htmx.on("linkListChanged", (e) => {
        reloadPage();
    });

    htmx.on("escolaridadeListChanged", (e) => {
        reloadPage();
    });

    htmx.on("cursoListChanged", (e) => {
        reloadPage();
    });
    
</script>
{%endblock%}